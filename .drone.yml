#---
#kind: pipeline
#type: kubernetes
#name: build
#platform:
#  os: linux
#  arch: amd64
#
#steps:
#- name: formatting-check
#  image: golang
#  commands:
#  - test -z $(gofmt -l .)
#- name: build
#  image: docker:dind
#  volumes:
#  - name: dockersock
#    path: /var/run
#  commands:
#  - docker build -f Dockerfile .
#
#services:
#- name: docker
#  image: docker:dind
#  privileged: true
#  volumes:
#  - name: dockersock
#    path: /var/run
#
#volumes:
#- name: dockersock
#  temp: {}
---
kind: pipeline
type: kubernetes
name: deploy
platform:
  os: linux
  arch: amd64

steps:
- name: build
  image: docker
  commands:
  - echo "$DOCKER_USERNAME"
  - echo "$DOCKER_PASSWORD" | docker login "docker.zvon.tech" --username "$DOCKER_USERNAME" --password-stdin